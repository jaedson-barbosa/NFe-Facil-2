BANCO DE DADOS - FIRESTORE
certificados: //completamente inacessivel, usar metodo para cadastra-los
publicCert
privateCert

empresas: // cadastro apenas via servidor
emit (...)
serieNFe
serieNFCe // implementacao futura
-usuarios: // permissao de leitura apenas para status 3 e escrita apenas com status 0 se nao houver nenhum
  id
  status //0-Aguardando analise/1-Acesso revogado/2-Acesso liberado/3-Administrador
  nome-email
  permissoes: visualizar-dados-base, visualizar-notas-emitidas, cadastrar-dados-base, emitir-notas
-clientes:
  dest: ...
-motoristas:
  transporta: ...
-produtos:
  det: ...
-notas: //usuarios nao podem escrever nesta tabela, apenas le-la
  id //do xml da nota, nao do firestore
  status //0-Salva;1-Emitida;2-Cancelada
  json
  xml
  xmlCancelamento

SESSIONSTORAGE
idEmpresa

METAS:
BASE para análise de viabilidade técnica:
OK  Cadastro de emitentes
OK  Cadastro e edição de dados base
OK  Tipos de ICMS de acordo com o regime do emitente
OK  Sistema de lista para ítens multiplos
    Tela de NFe
OK    Identificação
OK    Cliente
      Opcionais 1 (retirada, entrega e autorização)
      Produtos
      Campos opcionais
    Importação
    Exibição de notas
    Clonagem de NFe
    Servidor básico (sem todas análises)
OK    precadastro
      apenasSalvarNFe
      assinarTransmitirNFe
      gerarDANFENFe

BASE para emissão de NFe:
    Exibição de resumo do item no botão
    Dividir cadastro de produto em 2 telas (dados base e impostos) para diminuir 1 nível de hierarquia usando o mesmo sistema da tela de nfe (com root no _reset)
    Proibir o uso de emitente com CPF
      Via cadastro
      Via importação (restringido para emitente logado)
    Analisar elementos já salvos na importação
    Evento de cancelamento
      Geração
      Exibição de status
    Implementar cálculo de totais
    Analise de certificado do precadastro
    Proteger certificado com senha (armazenada ou não no dispositivo do cliente e criptografada)
    Estudar uso de https://nodejs.org/api/crypto.html no lugar de node-forge
    Avaliar talvez só guardar a chave private e obter a publica a partir dela
    Customização (em choice tem um estatico)

MODERNIZAÇÃO
    Adicionar Svelte
    Remover PWA (readicionar apenas na fase beta)
    Comunicação direta com o Firestore para diminuir a complexidade das funções
    Bulma CSS para estilização
    Personalização com o https://jenil.github.io/bulmaswatch/

REFINAMENTOS (pré-alpha):
    Evento de cancelamento
      Importação
    Mais configurações na tela de emitente
      Função no servidor para atualização
      Emitente atualizado na sincronização
      Modo de sessão única (com sinc apenas no dados.ts)
      Controle de usuários liberados
        Liberar novos pedidos
        Revogar liberações
        Controlar permissões
    Calculo de impostos semi-automático
      ICMS
      PIS
      COFINS
      Importação
      Cadastro
      Exibição
    Otimizar nfe.json
    Interfaces para banco de dados
      Firestore
      IntexedDB
    Interfaces para requisições e respostas na pasta commom
    Mais configurações na tela de emitente
      Personalização de campos da NFe em templates personalizáveis
    Analise geral da solução e limpeza completa
    Leitura completa dos arquivos de documentação da NFe

REFINAMENTOS FUTUROS (alplha):
    Scanner de código de barras
      USB
      Câmera de celular
    Gerenciamento de estoque
    NFC-e
      Usar um parceiro para realizar testes de emissão
      DANFE
        Testar impressão de PDF, caso dê errado devem ser usados apps para isso, pro Android tem alguns

proj. mae: https://www.w3schools.com/code/tryit.asp?filename=GQQAXEQ5SSZ3

Observações:  
ISSQN limitado para o ambiente nacional. Se necessário, basta pedir a implementação ao desenvolvedor.
Retirada e entrega limitados para o ambiente nacional. Se necessário, basta pedir a implementação ao desenvolvedor.
